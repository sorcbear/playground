<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Barrel Puzzle</title>

<style>
:root{
  --lineColor:#000;
  --outerLine:4px;
  --midLine:4px;

  --digitColor:#243B8F;
  --digitStroke:#0B0F2E;

  /* 按钮尺寸与间距（按你要求：更大、更远） */
  --btnSize:72px;
  --btnGap:40px;
}

html,body{
  margin:0;
  padding:0;
  background:#fff;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
}

.wrap{
  max-width:1200px;
  margin:24px auto 20px;
  padding:0 12px;
}

/* ===== 三张牌拼成一体 ===== */
.strip{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  border:var(--outerLine) solid var(--lineColor);
  border-radius:18px;
  overflow:hidden;
}

/* 单张卡片：不使用 aspect-ratio，靠图片自然高度 */
.card{
  position:relative;
  background:#fff;
}

.card.sep{
  border-right:var(--midLine) solid var(--lineColor);
}

/* 图案：完全原尺寸比例 */
.card img.pattern{
  display:block;
  width:100%;
  height:auto;       /* 关键：让高度由图片决定 */
}

/* 数字覆盖层（绝对居中） */
.digit{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%, -50%);

  font-family:"Cinzel","Times New Roman",serif;
  font-size:320px;          /* 明确写死，避免设备差异 */
  line-height:1;
  color:var(--digitColor);

  -webkit-text-stroke:7px var(--digitStroke);
  paint-order:stroke fill;

  text-shadow:0 6px 0 rgba(0,0,0,.15);
  user-select:none;
}

/* ===== 按钮区 ===== */
.buttons{
  display:flex;
  justify-content:center;
  gap:var(--btnGap);
  margin-top:26px;
}

.coinBtn{
  width:var(--btnSize);
  height:var(--btnSize);
  border:none;
  background:none;
  padding:0;
  cursor:pointer;
}

.coinBtn img{
  width:100%;
  height:100%;
  display:block;
}

/* ===== 状态 ===== */
.status{
  text-align:center;
  margin-top:14px;
  font-weight:600;
}
</style>
</head>

<body>
<div class="wrap">

  <div class="strip">
    <div class="card sep">
      <img class="pattern" id="pat1" src="p0.png">
      <div class="digit" id="dig1">1</div>
    </div>

    <div class="card sep">
      <img class="pattern" id="pat2" src="p1.png">
      <div class="digit" id="dig2">1</div>
    </div>

    <div class="card">
      <img class="pattern" id="pat3" src="p2.png">
      <div class="digit" id="dig3">3</div>
    </div>
  </div>

  <div class="buttons">
    <button class="coinBtn" id="btn1"><img src="coin.png"></button>
    <button class="coinBtn" id="btn2"><img src="coin.png"></button>
    <button class="coinBtn" id="btn3"><img src="coin.png"></button>
  </div>

  <div class="status" id="status"></div>
</div>

<script>
/* ===== 状态 ===== */
let D = [1,1,3];
let P = [0,1,2];
const patterns = ["p0.png","p1.png","p2.png","p3.png"];

/* 目标（示例） */
const targetD=[4,7,2];
const targetP=[0,2,3];

const digEls=[
  document.getElementById("dig1"),
  document.getElementById("dig2"),
  document.getElementById("dig3")
];
const patEls=[
  document.getElementById("pat1"),
  document.getElementById("pat2"),
  document.getElementById("pat3")
];

function incDigit(x){ return (x%9)+1; }
function incPattern(x){ return (x+1)%patterns.length; }

/* 规则 */
function applyRule(k){
  if(k===1){
    D[0]=incDigit(D[0]);
    P[1]=incPattern(P[1]);
  }else if(k===2){
    P[0]=incPattern(P[0]);
    D[1]=incDigit(D[1]);
    D[2]=incDigit(D[2]);
  }else if(k===3){
    D[0]=incDigit(D[0]);
    D[1]=incDigit(D[1]);
    D[2]=incDigit(D[2]);
  }
}

function render(){
  for(let i=0;i<3;i++){
    digEls[i].textContent=D[i];
    patEls[i].src=patterns[P[i]];
  }
}

function check(){
  for(let i=0;i<3;i++){
    if(D[i]!==targetD[i]||P[i]!==targetP[i]) return;
  }
  document.getElementById("status").textContent="success";
}

btn1.onclick=()=>{applyRule(1);render();check();};
btn2.onclick=()=>{applyRule(2);render();check();};
btn3.onclick=()=>{applyRule(3);render();check();};

render();
</script>
</body>
</html>
